<div  ng-swipe-left="goToPage('/{{appUrl}}kscr-poc/index.jsp')" draggable="true" ng-swipe-right="goToPage('/myCart')">
<!--My Cart Main Heading-->
<div class="kscr-MainHeading util-Grid util-Grid--center">
    <div class="util-Grid-cell">
        <div class="kscr-MainHeading-icon-left"><a ui-sref="root.responsive.cart" ><i class="glyphicon glyphicon-shopping-cart"></i></a></div>
        <div class="kscr-MainHeading-header kscr-Schedule-header">My Schedule</div>
        <div class="kscr-MainHeading-icon-right"><a href="{{appUrl}}kscr-poc/index.jsp"><i class="glyphicon glyphicon-search"></i></a></div>
    </div>
</div>

<div class="kscr-Responsive-schedule">
<div class="kscr-Responsive-registered">
<div class="kscr-Card-heading">
    <span ng-if="registeredCredits() > 0">
        <span class="kscr-Heading-sub">REGISTERED</span>
        <span id="reg_credit_count" class="kscr-Heading-support util-Grid--floatRight">
            <ng-pluralize count="registeredCredits()"
                when="{'1' : '{} CREDIT',
                'other': '{} CREDITS'}">
            </ng-pluralize>
         </span>
    </span>
    <span ng-if="registeredCredits() == 0">
        <span class="kscr-Heading-message">You are not registered for any courses.</span>
    </span>
</div>
<!--Alert message-->
<!-- div id="user_message" class="util-Alert util-Alert--{{userMessage.type}}" ng-if="userMessage.txt">
    {{userMessage.txt}}
    <a id="userMessageInvoke" ng-click="invokeActionLink(userMessage.actionLink);" ng-if="userMessage.linkText">{{userMessage.linkText}}</a>
    <span class="kscr-Card-statusRemove" ng-if="!userMessage.linkText"><a href="" ng-click="removeUserMessage()"><i class="glyphicon glyphicon-remove"></i></a></span>
</div -->
<div class="kscr-Card">
    <div ng-repeat="schedule in getSchedules()">
        <div ng-repeat="course in schedule.registeredCourseOfferings" class="kscr-course-container">
            <!--Drop from Registered section-->
            <div id="course_status_message" class="util-Alert--{{course.statusMessage.type}}" ng-class="(course.dropped || course.dropProcessing) ? 'util-Alert--card--dropped' : 'util-Alert--card'" ng-if="course.statusMessage.txt">
                <span class="kscr-Card-statusRemove"><a href="" ng-click="(!course.dropProcessing ? removeStatusMessage(course) : '')"><i class="glyphicon glyphicon-remove"></i></a></span>
                <div  ng-bind-html="course.statusMessage.txt"></div>
            </div>
            <div class="kscr-dropCourse-container" ng-show="course.dropping">
                <div class="kscr-dropCourse-background"></div>
                <div class="kscr-dropCourse-content">
                    <!--  Schedule Item Drop Section -->
                    <div class="kscr-DropCourse">
                        <form ng-submit="dropRegistrationGroup(index, course)">
                            <div class="kscr-DropCourse-content">
                                <div class="kscr-DropCourse-header">Drop Course <strong>{{course.courseCode}} ({{course.regGroupCode}})</strong>?</div>
                                <div class="kscr-DropCourse-buttons util-Grid"><div class="util-Grid-cell"></div>
                                    <span>
                                        <button id="dropRegGroup_{{course.courseCode}}_{{course.regGroupCode}}" class="kscr-Button--primary" type="submit" focus-me="course.dropping">Confirm Drop</button>
                                          <div class="global-Base-divider"></div>
                                        <button id="dropRegGroupCancel" class="kscr-Button" type="button" ng-click="cancelDropConfirmation(course)">Cancel</button>
                                    </span>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <accordion close-others="oneAtATime" ng-if="!course.dropped && !course.dropProcessing">
                <accordion-group is-open="course.isopen">
                    <accordion-heading>
                        <div ng-class="{'kscr-Card-accordion-heading': true}">
                            <!--credits-->
                            <div id="course_info_{{course.courseCode}}_{{course.regGroupCode}}" class="kscr-Card-supportText" ng-hide="cartItem.editing" ng-class="{ 'kscr-Card-credits-fadeIn': course.editCredits, 'kscr-Card-credits-fadeOut': course.editCreditsDone }">
                                <ng-pluralize count="course.credits"
                                              when="{'1'    : '{} cr',
                                                     'other': '{} cr'}">
                                </ng-pluralize>
                            </div>
                            <!--Course Header Section-->
                            <div>
                                <span class="kscr-Card-icon"><i class="glyphicon" ng-class="{'glyphicon-chevron-down': course.isopen, 'glyphicon-chevron-right': !course.isopen}"></i></span>
                                <span class="kscr-Card-title" id="course_code_{{course.courseCode}}_{{course.regGroupCode}}"><strong>{{course.courseCode}} ({{course.regGroupCode}})</strong></span>
                                <span id="grading_badge_{{course.courseCode}}_{{course.regGroupCode}}" ng-show="showBadge(course)" ng-class="{ 'kscr-Card-badge-fadeIn': course.editGradingOption, 'kscr-Card-badge-fade': !course.editGradingOption, 'kscr-Card-badge-fadeOutLetter': course.editGradingOptionLetter && course.editGradingOptionDone }">{{course.gradingOptions[course.gradingOptionId]}}</span>
                            </div>
                            <!--Course Title and description-->
                            <div class="kscr-Card-text" id="title_{{course.courseCode}}_{{course.regGroupCode}}" ng-show="course.isopen">{{course.longName}}</div>
                            <!--AO info: type, time, location-->
                            <div ng-repeat="ao in course.activityOfferings" class="kscr-Card-detailsText--show" ng-show="!course.isopen">
                                <span class="kscr-Card-courseTimes">
                                    <div id="ao_type_{{course.courseCode}}_{{course.regGroupCode}}_{{$index}}" class="kscr-Card-ao-type">{{ao.activityOfferingTypeName | limitTo : 3}}</div>
                                    <div ng-repeat="scheduleComponent in ao.scheduleComponents" id="schedule_{{course.courseCode}}_{{course.regGroupCode}}_{{$parent.$index}}_{{$index}}" class="kscr-Card-scheduleComponent">
                                        <span ng-hide="scheduleComponent.isTBA" class="util-Grid--floatLeft">{{scheduleComponent.days}} {{scheduleComponent.displayTime}}</span>
                                        <span ng-hide="scheduleComponent.isTBA" class="util-Grid--floatRight">{{scheduleComponent.buildingCode}} {{scheduleComponent.roomCode}}</span>
                                        <span ng-show="scheduleComponent.isTBA" class="util-Grid--floatRight">TBA</span>
                                    </div>
                                </span>
                            </div>
                        </div>
                    </accordion-heading>
                    <!-- Course details: AO type, start-end dates, etc. -->
                    <div ng-hide="course.editing">
                        <!--course time, day, building-->
                        <div ng-repeat="ao in course.activityOfferings" class="kscr-Card-detailsText--edit">
                            <div>
                                <span id="ao_type_long_{{course.courseCode}}_{{course.regGroupCode}}_{{$index}}">{{ao.activityOfferingTypeName}}</span>
                                <span class="kscr-Card-ao-instructor">
                                    <div ng-repeat="instructor in ao.instructors">{{instructor.firstName}} {{instructor.lastName}}</div>
                                </span>
                            </div>
                            <div ng-repeat="scheduleComponent in ao.scheduleComponents" id="schedule_long_{{course.courseCode}}_{{course.regGroupCode}}_{{$parent.$index}}_{{$index}}" class="kscr-Card-ao-schedule">
                                <span ng-hide="scheduleComponent.isTBA" class="util-Grid--floatLeft">{{scheduleComponent.days}} {{scheduleComponent.displayTime}}</span>
                                <span ng-hide="scheduleComponent.isTBA" class="util-Grid--floatRight">{{scheduleComponent.buildingCode}} {{scheduleComponent.roomCode}}</span>
                                <span ng-show="scheduleComponent.isTBA">TBA</span>
                            </div>
                        </div>
                        <!--Course Registration Buttons-->
                        <div class="kscr-Card-buttons">
                          <span>
                            <!--<button class="btn">Details</button>-->
                            <button class="kscr-Button" id="edit_{{course.courseCode}}_{{course.regGroupCode}}" ng-click="editScheduleItem(course)" ng-show="course.creditOptions.length > 1 || course.gradingOptionCount > 1">Edit</button>
                            <div class="global-Base-divider"></div>
                            <button class="kscr-Button" id="remove_{{course.courseCode}}_{{course.regGroupCode}}" ng-click="openDropConfirmation($index, course)">Drop</button>
                          </span>
                        </div>
                    </div>

                    <!-- Schedule Item Change Section: Credits, Grading, and Save -->
                    <course-options course="course" prefix="schedule_" on-submit="updateScheduleItem(course)" ng-show="course.editing"></course-options>
                </accordion-group>
            </accordion>
        </div>
    </div>
</div>
</div>

<div ng-class="{'kscr-Responsive-waitlisted':true,'kscr-Responsive-waitlisted--inactive':!waitlistedCourseCount() && !showWaitlistMessages}">
<!--Waitlisted section-->
<div class="kscr-Card-heading" ng-show="waitlistedCourseCount() || showWaitlistMessages">
    <span>
        <span class="kscr-Heading-sub">WAITLISTED</span>
        <span id="waitlisted_credit_count" class="kscr-Heading-support util-Grid--floatRight">
            <ng-pluralize count="waitlistedCredits()"
                when="{'1' : '{} CREDIT',
                'other': '{} CREDITS'}">
            </ng-pluralize>
        </span>
    </span>
</div>
<div class="kscr-Card">
    <div ng-repeat="schedule in getSchedules()">
        <div ng-repeat="course in schedule.waitlistCourseOfferings" class="kscr-course-container">
            <!--Dropped from Waitlist section-->
            <div id="waitlist_course_status_message" class="util-Alert--{{course.statusMessage.type}}" ng-class="(course.dropped || course.dropProcessing) ? 'util-Alert--card--dropped' : 'util-Alert--card'" ng-if="course.statusMessage.txt">
                <span class="kscr-Card-statusRemove"><a href="" ng-click="(!course.dropProcessing ? ((course.dropped) ? removeWaitlistStatusMessage(course) : removeStatusMessage(course)) : '')"><i class="glyphicon glyphicon-remove"></i></a></span>
                <div class="kscr-Card-alert-spacing" ng-bind-html="course.statusMessage.txt"></div>
            </div>
            <div class="kscr-dropCourse-container" ng-show="course.dropping">
                <div class="kscr-dropCourse-background"></div>
                <div class="kscr-dropCourse-content">
                    <!--  Remove from Waitlist Section -->
                    <div class="kscr-DropCourse">
                        <form ng-submit="dropFromWaitlist(index, course)">
                            <div class="kscr-DropCourse-content">
                                <div class="kscr-DropCourse-header">Remove from Waitlist for <strong>{{course.courseCode}} ({{course.regGroupCode}})</strong>?</div>
                                <div class="kscr-DropCourse-buttons util-Grid"><div class="util-Grid-cell"></div>
                                    <span>
                                        <button id="removeWaitlist" class="kscr-Button--primary" type="submit" focus-me="course.dropping">Confirm Remove</button>
                                        <div class="global-Base-divider"></div>
                                        <button id="removeWaitlistCancel" class="kscr-Button" type="button" ng-click="cancelDropConfirmation(course)">Cancel</button>
                                    </span>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <accordion close-others="oneAtATime" ng-if="!course.dropped && !course.dropProcessing">
                <accordion-group is-open="course.isopen">
                    <accordion-heading>
                        <div ng-class="{'kscr-Card-accordion-heading': true}">
                            <!--credits-->
                            <div id="waitlist_course_info_{{course.courseCode}}_{{course.regGroupCode}}" class="kscr-Card-supportText" ng-hide="cartItem.editing" ng-class="{ 'kscr-Card-credits-fadeIn': course.editCredits, 'kscr-Card-credits-fadeOut': course.editCreditsDone }">
                                <ng-pluralize count="course.credits"
                                              when="{'1'    : '{} cr',
                                                     'other': '{} cr'}">
                                </ng-pluralize>
                            </div>
                            <!--Course Header Section-->
                            <div>
                                <span class="kscr-Card-icon"><i class="glyphicon" ng-class="{'glyphicon-chevron-down': course.isopen, 'glyphicon-chevron-right': !course.isopen}"></i></span>
                                <span class="kscr-Card-title" id="waitlist_course_code_{{course.courseCode}}_{{course.regGroupCode}}"><strong>{{course.courseCode}} ({{course.regGroupCode}}) </strong><i class="glyphicon glyphicon-time kscr-Waitlisted-clockIcon"></i></span>
                                <span id="waitlist_grading_badge_{{course.courseCode}}_{{course.regGroupCode}}" ng-show="showBadge(course)" ng-class="{ 'kscr-Card-badge-fadeIn': course.editGradingOption, 'kscr-Card-badge-fade': !course.editGradingOption, 'kscr-Card-badge-fadeOutLetter': course.editGradingOptionLetter && course.editGradingOptionDone }">{{course.gradingOptions[course.gradingOptionId]}}</span>
                            </div>
                            <!--Course Title and description-->
                            <div class="kscr-Card-text" id="waitlist_title_{{course.courseCode}}_{{course.regGroupCode}}" ng-show="course.isopen">{{course.longName}}</div>
                            <!--AO info: type, time, location-->
                            <div ng-repeat="ao in course.activityOfferings" class="kscr-Card-detailsText--show" ng-show="!course.isopen">
                                <span class="kscr-Card-courseTimes">
                                    <div id="waitlist_ao_type_{{course.courseCode}}_{{course.regGroupCode}}_{{$index}}" class="kscr-Card-ao-type">{{ao.activityOfferingTypeName | limitTo : 3}}</div>
                                    <div ng-repeat="scheduleComponent in ao.scheduleComponents" id="waitlist_schedule_{{course.courseCode}}_{{course.regGroupCode}}_{{$parent.$index}}_{{$index}}" class="kscr-Card-scheduleComponent">
                                        <span ng-hide="scheduleComponent.isTBA" class="util-Grid--floatLeft">{{scheduleComponent.days}} {{scheduleComponent.displayTime}}</span>
                                        <span ng-hide="scheduleComponent.isTBA" class="util-Grid--floatRight">{{scheduleComponent.buildingCode}} {{scheduleComponent.roomCode}}</span>
                                        <span ng-show="scheduleComponent.isTBA" class="util-Grid--floatRight">TBA</span>
                                    </div>
                                </span>
                            </div>
                        </div>
                    </accordion-heading>
                    <div class="kscr-Waitlisted-details">
                       <i class="glyphicon glyphicon-time kscr-Waitlisted-clockIcon"> </i> Waitlisted for this course
                    </div>
                    <div ng-hide="course.editing">
                        <!--course time, day, building-->
                        <div ng-repeat="ao in course.activityOfferings" class="kscr-Card-detailsText--edit">
                            <div>
                                <span id="waitlist_ao_type_long_{{course.courseCode}}_{{course.regGroupCode}}_{{$index}}">{{ao.activityOfferingTypeName}}</span>
                                <span class="kscr-Card-ao-instructor">
                                    <div ng-repeat="instructor in ao.instructors">{{instructor.firstName}} {{instructor.lastName}}</div>
                                </span>
                            </div>
                            <div ng-repeat="scheduleComponent in ao.scheduleComponents" id="waitlist_schedule_long_{{course.courseCode}}_{{course.regGroupCode}}_{{$parent.$index}}_{{$index}}" class="kscr-Card-ao-schedule">
                                <span ng-hide="scheduleComponent.isTBA" class="util-Grid--floatLeft">{{scheduleComponent.days}} {{scheduleComponent.displayTime}}</span>
                                <span ng-hide="scheduleComponent.isTBA" class="util-Grid--floatRight">{{scheduleComponent.buildingCode}} {{scheduleComponent.roomCode}}</span>
                                <span ng-show="scheduleComponent.isTBA">TBA</span>
                            </div>
                        </div>
                        <!--Waitlisted Edit, Remove Buttons-->
                        <div class="kscr-Card-buttons">
                            <span>
                                <!--<button class="btn">Details</button>-->
                                <button class="kscr-Button" id="waitlist_edit_{{course.courseCode}}_{{course.regGroupCode}}" ng-click="editScheduleItem(course)" ng-show="course.creditOptions.length > 1 || course.gradingOptionCount > 1">Edit</button>
                                <div class="global-Base-divider"></div>
                                <button class="kscr-Button" id="waitlist_remove_{{course.courseCode}}_{{course.regGroupCode}}" ng-click="openDropConfirmation($index, course)">Remove</button>
                            </span>
                        </div>
                    </div>

                    <!-- Waitlist Item Change Section: Credits, Registration Options, and Save -->
                    <course-options course="course" prefix="waitlist_" on-submit="updateWaitlistItem(course)" ng-show="course.editing"></course-options>

                </accordion-group>
            </accordion>
        </div>
    </div>
</div>
</div>
</div>
</div>