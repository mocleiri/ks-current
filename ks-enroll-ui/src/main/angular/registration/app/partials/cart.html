
<div class="kscr-MainHeading util-Grid util-Grid--center">
    <div class="util-Grid-cell">
        <span class="kscr-MainHeading-header">MY CART  </span>
        <span id="credit_count_title" class="kscr-Heading-support">
            <ng-pluralize count="cart.items.length"
                          when="{'1'    : '{} course',
                                     'other': '{} courses'}">
            </ng-pluralize>
            (<ng-pluralize count="creditTotal"
                          when="{'1'    : '{} credit',
                                     'other': '{} credits'}">
            </ng-pluralize>)
        </span>
    </div>

    <div>
        <button id="register" class="kscr-Button--primary" type="submit" ng-click="register()">Register</button>
    </div>
</div>

<!--My Cart Input Boxes and Add to Cart Button -->
<div class="kscr-RegInput">
    <form novalidate name="form" ng-submit="add();">
        <fieldset>
            <div class="util-Grid">
                <div class="util-Grid-cell"><label for="courseCode" class="kscr-RegInput-label" >Course Code</label></div>
                <div class="util-Grid-cell"><label for="regCode" class="kscr-RegInput-label">Reg Group</label></div>
                <div class="util-Grid-cell"></div>
            </div>
            <div class="util-Grid">
                <div class="util-Grid-cell"><input placeholder="CHEM237" id="courseCode" class="kscr-RegInput-input" type="text" size="8" maxlength="8" ng-model="courseCode" /></div>
                <div class="util-Grid-cell"><input placeholder="1001" id="regCode" class="kscr-RegInput-input" type="text" size="4" maxlength="4" ng-model="regCode" /></div>
                <div class="util-Grid-cell"><button id="submit" name="submit" class="kscr-Button">Add to Cart</button></div>
            </div>
        </fieldset>
    </form>
</div>

<div class="kscr-Registered" ui-sref="root.schedule">
    <span>Registered for {{registeredCourseCount()}} courses ({{registeredCredits()}} credits) &#187;</span>
</div>

<div class="kscr-Heading-sub">
    <span>CART CONTENTS</span>
</div>

<!--Alert message-->
<div id="user_message" class="util-Alert util-Alert--{{userMessage.type}}" ng-if="userMessage.txt">
    {{userMessage.txt}}
    <a id="userMessageInvoke" ng-click="invokeActionLink(userMessage.actionLink);" ng-if="userMessage.linkText">{{userMessage.linkText}}</a>
</div>

<div class="kscr-Register">
<accordion close-others="oneAtATime">
    <accordion-group  ng-repeat="cartItem in cart.items" is-open="isopen">
        <accordion-heading>
            <!--credits-->
            <div id="course_info_{{cartItem.courseCode}}_{{cartItem.regGroupCode}}" class="kscr-Card-supportText" ng-hide="cartItem.editing">
                <ng-pluralize count="cartItem.credits"
                              when="{'1'    : '{} credit',
                                     'other': '{} credits'}">
                </ng-pluralize>, {{cartItem.gradingOptions[cartItem.grading]}}
            </div>

            <!--Course Header Section-->
            <div>
                 <span class="kscr-Register-icon"><i class="glyphicon" ng-class="{'glyphicon-chevron-down': isopen, 'glyphicon-chevron-right': !isopen}"></i></span>
                 <span class="kscr-Register-header kscr-Card-title" id="course_code_{{cartItem.courseCode}}_{{cartItem.regGroupCode}}">{{cartItem.courseCode}} ({{cartItem.regGroupCode}})</span>
            </div>
            <!--Course Title and description-->
            <div class="kscr-Register-cardText kscr-Card-text" id="title_{{cartItem.courseCode}}_{{cartItem.regGroupCode}}">{{cartItem.courseTitle}}</div>

        </accordion-heading>
            <div ng-hide="cartItem.editing" class="kscr-Card-detailsText">
                <!--course time, day, building-->
                <div ng-repeat="item in cartItem.schedule">
                      <span class="kscr-Card-courseTimes">
                        <div id="ao_type_{{cartItem.courseCode}}_{{cartItem.regGroupCode}}_{{$index}}">{{item.activityOfferingType}} &nbsp;</div>
                            <div ng-repeat="scheduleItem in item.activityOfferingLocationTime" id="schedule_{{cartItem.courseCode}}_{{cartItem.regGroupCode}}_{{$parent.$index}}_{{$index}}">
                                <span ng-hide="scheduleItem.isTBA">
                                    {{scheduleItem.time.days}} {{scheduleItem.time.startTime}} - {{scheduleItem.time.endTime}}
                                    {{scheduleItem.location.building}} {{scheduleItem.location.room}}
                                </span>
                                <span ng-show="scheduleItem.isTBA"> TBA</span>
                            </div>
                      </span>
                </div>

                <!--Course Registration Buttons-->
                <div class="kscr-Card-buttons">
                      <span>
                        <!--<button class="btn">Details</button>-->
                        <button class="kscr-Button" id="edit_{{cartItem.courseCode}}_{{cartItem.regGroupCode}}" ng-click="editItem(cartItem)"ng-show="cartItem.creditOptions.length > 1 || cartItem.gradingOptionCount > 1">Edit</button>
                        <button class="kscr-Button" id="remove_{{cartItem.courseCode}}_{{cartItem.regGroupCode}}" ng-click="delete($index)">Remove</button>
                      </span>
                </div>
            </div>
            <!-- Cart Change Section: Credits, Grading, and Save -->
            <div class="kscr-Card-detailsText" ng-show="cartItem.editing">
                <form ng-submit="updateCartItem(cartItem, newCredits, newGrading)">
                    <div>
                        <label class="kscr-Edit-details" for="credits_{{cartItem.courseCode}}_{{cartItem.regGroupCode}}">Credits</label>
                        <select class="kscr-Edit-details" id="credits_{{cartItem.courseCode}}_{{cartItem.regGroupCode}}" ng-model="newCredits"
                                ng-options="creditOption for creditOption in cartItem.creditOptions"></select>
                    </div>
                    <div>
                        <label class="kscr-Edit-details" for="grading_{{cartItem.courseCode}}_{{cartItem.regGroupCode}}">Registration Options</label>
                        <select class="kscr-Edit-details" id="grading_{{cartItem.courseCode}}_{{cartItem.regGroupCode}}" ng-model="newGrading"
                                ng-options="key as value for (key, value) in cartItem.gradingOptions"></select>

                    </div>
                    <!--Edit buttons-->
                    <div class="kscr-Card-buttons">
                        <span>
                          <button id="save_{{cartItem.courseCode}}_{{cartItem.regGroupCode}}" class="kscr-Button--primary" type="submit">Save Changes</button>
                          <button id="cancel_{{cartItem.courseCode}}_{{cartItem.regGroupCode}}" class="kscr-Button" type="button" ng-click="cancelEditItem(cartItem)">Cancel</button>
                        </span>
                    </div>
                </form>
            </div>
    </accordion-group>
</accordion>
</div>