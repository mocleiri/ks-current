<?xml version="1.0" encoding="UTF-8"?>
<!--

    Copyright 2005-2012 The Kuali Foundation

    Licensed under the Educational Community License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

    http://www.opensource.org/licenses/ecl2.php

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <bean id="RateRolloverView" parent="Uif-KsaFormView" p:footer.render="false">
        <property name="title" value="Rate Rollover"/>
        <property name="headerText" value="Fee Management"/>
        <property name="entryPageId" value="RateRolloverPage"/>
        <property name="formClass" value="com.sigmasys.kuali.ksa.krad.form.RateRolloverForm"/>
        <property name="viewHelperServiceClass" value="com.sigmasys.kuali.ksa.krad.helper.RateRolloverHelper"/>
        <property name="navigation" ref="KsaFeeManagementNavigation"/>
        <property name="items">
            <list merge="true">
                <bean parent="Uif-Page" p:id="RateRolloverPage" p:title="Rate Rollover">
                    <property name="headerText" value="Rate Rollover"/>
                    <property name="items">
                        <list>
							<!-- Select Rates section -->
							<ref bean="selectRatesSection"/>
							
							<!-- Rollover Options section -->
							<ref bean="rolloverOptionsSection"/>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>

	
	<!--
		Select Rates section 
	-->
	
	<bean id="selectRatesSection" parent="Uif-VerticalBoxSection" p:headerText="Select Rates">
		<property name="items">
			<list>
				<!-- Required Fields message -->
				<bean parent="Uif-Message" p:messageText="* Required Fields"/>
			
				<!-- Academic Time Period from -->
                <bean parent="Uif-InputField-LabelTop" p:label="Academic Time Period" p:propertyName="atpRolloverFrom" p:required="true" p:style="margin-top: 25px;">
                    <property name="suggest">
                        <bean parent="Uif-Suggest">
                            <property name="labelPropertyName" value="atpName"/>
                            <property name="valuePropertyName" value="atpId"/>
                            <property name="templateOptions" value="minLength:2,delay:0"/>
                            <property name="suggestQuery">
                                <bean parent="Uif-AttributeQueryConfig">
                                    <property name="queryMethodToCall" value="getAtpRolloverFromForSuggest"/>
                                </bean>
                            </property>
                        </bean>
                    </property>
                </bean>
				
				<!-- Get Information button -->
				<bean parent="Uif-SecondaryActionButton" p:actionLabel="Get Information" p:methodToCall="getAtpFromInfo"/>
				
				<!-- ATP Rollover from information message -->
				<bean parent="Uif-Message" p:messageText="@{atpRolloverFromInfo}" p:hidden="@{atpRolloverFromInfo == null}" p:style="margin-top: 20px;"/>
				
				<!-- ATP Rollover from error message -->
				<bean parent="Uif-Message" p:messageText="@{atpRolloverFromError}" p:hidden="@{atpRolloverFromError == null}" p:style="color: red; margin-top: 20px;"/>
			</list>
		</property>
	</bean>

	
	<!--
		Rollover Options section 
	-->

	<bean id="rolloverOptionsSection" parent="Uif-VerticalBoxSection" p:headerText="Rollover Options" p:style="margin-top: 25px;">
		<property name="items">
			<list>
				<!-- Academic Time Period to -->
                <bean parent="Uif-InputField-LabelTop" p:label="Rollover to Academic Time Period" p:propertyName="atpRolloverTo" p:required="true">
                    <property name="suggest">
                        <bean parent="Uif-Suggest">
                            <property name="labelPropertyName" value="atpName"/>
                            <property name="valuePropertyName" value="atpId"/>
                            <property name="templateOptions" value="minLength:2,delay:0"/>
                            <property name="suggestQuery">
                                <bean parent="Uif-AttributeQueryConfig">
                                    <property name="queryMethodToCall" value="getAtpRolloverToForSuggest"/>
                                </bean>
                            </property>
                        </bean>
                    </property>
                </bean>
				
				<!-- Date Setting section -->
				<!-- Null Dates option -->
				<bean parent="Uif-InputField-LabelTop" p:id="radioNullDates" p:propertyName="nullDatesOption"
							p:onClickScript="writeHiddenToForm('selectedDateOption', 'nullDatesOption'); onClickRolloverRatesRadioNullDates();" 
							p:label="Make date settings valid by" p:fieldLabel.renderColon="true">
					<property name="control">
						<bean parent="Uif-VerticalRadioControl">
							<property name="options">
								<list>
									<bean parent="Uif-KeyLabelPair" p:key="1" p:value="Setting the Date Type, Effective Date and Recognition Date to NULL"/>
								</list>
							</property>
						</bean>
					</property>
				</bean>
				
				<!-- Automatic Date Advancement option -->
				<bean parent="Uif-VerticalBoxSection">
					<property name="items">
						<list>
							<!-- Radio Button -->
							<bean parent="Uif-InputField" p:id="radioAutoAdvancedDates" p:propertyName="autoAdvancedDatesOption"
									p:onClickScript="writeHiddenToForm('selectedDateOption', 'autoAdvancedDatesOption'); onClickRolloverRatesRadioAutoAdvancedDates();">
								<property name="control">
									<bean parent="Uif-VerticalRadioControl">
										<property name="options">
											<list>
												<bean parent="Uif-KeyLabelPair" p:key="1" p:value="Automatically advancing the Effective Date and Recognition Date by the following number of days of all rates where the current Effective Dates and Recognition Dates are not null:"/>
											</list>
										</property>
									</bean>
								</property>
							</bean>
							
							<!-- Number of Days input field -->
							<bean parent="Uif-InputField-LabelTop" p:id="inputNumDaysToAdvance" p:propertyName="numOfDaysToAdvance" p:label="Number of Days to Advance Dates" p:fieldLabel.renderColon="false" 
									p:style="margin-left: 20px;" p:hidden="@{selectedDateOption != 'autoAdvancedDatesOption'}"/>
						</list>
					</property>
				</bean>
				
				<!-- Custom Date Settings option -->
				<bean parent="Uif-VerticalBoxSection">
					<property name="items">
						<list>
							<!-- Radio Button -->
							<bean parent="Uif-InputField" p:id="radioCustomDates" p:propertyName="customDatesOption"
									p:onClickScript="writeHiddenToForm('selectedDateOption', 'customDatesOption'); onClickRolloverRatesRadioCustomDates();">
								<property name="control">
									<bean parent="Uif-VerticalRadioControl">
										<property name="options">
											<list>
												<bean parent="Uif-KeyLabelPair" p:key="1" p:value="Setting the Effective Date and Recognition Date to a valid static date of all rates where the Effective Date and Recognition Date are not null:"/>
											</list>
										</property>
									</bean>
								</property>
							</bean>
							
							<!-- Custom Transaction Date -->
							<bean parent="Uif-InputField-LabelTop" p:id="customTransactionDate" p:propertyName="customTransactionDate" p:label="Transaction Date"
								  p:fieldLabel.renderColon="false" p:constraintText="Format: mm/dd/yyyy" p:style="margin-left: 20px;" p:hidden="@{selectedDateOption != 'customDatesOption'}">
								<property name="control">
									<bean parent="Uif-DateControl" p:size="11" p:maxLength="20"/>
								</property>
							</bean>
							
							<!-- Custom Recognition Date -->
							<bean parent="Uif-InputField-LabelTop" p:id="customRecognitionDate" p:propertyName="customRecognitionDate" p:label="Recognition Date"
								  p:fieldLabel.renderColon="false" p:constraintText="Format: mm/dd/yyyy" p:style="margin-left: 20px;" p:hidden="@{selectedDateOption != 'customDatesOption'}">
								<property name="control">
									<bean parent="Uif-DateControl" p:size="11" p:maxLength="20"/>
								</property>
							</bean>
						</list>
					</property>
				</bean>
				
				<!-- Rollover Dates button -->
				<bean parent="Uif-SecondaryActionButton" p:actionLabel="RolloverRates" p:methodToCall="rolloverRates"/>
				
				<!-- Error message -->
				<bean parent="Uif-Message" p:messageText="@{rolloverErrorMessage}" p:style="color: red;" p:hidden="@{rolloverErrorMessage == null}"/>
			</list>
		</property>
	</bean>
	
</beans>