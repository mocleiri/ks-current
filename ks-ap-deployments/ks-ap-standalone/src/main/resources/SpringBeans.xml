<?xml version="1.0" encoding="UTF-8"?>
<!-- Copyright 2008-2009 The Kuali Foundation Licensed under the Educational 
	Community License, Version 2.0 (the "License"); you may not use this file 
	except in compliance with the License. You may obtain a copy of the License 
	at http://www.opensource.org/licenses/ecl2.php Unless required by applicable 
	law or agreed to in writing, software distributed under the License is distributed 
	on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either 
	express or implied. See the License for the specific language governing permissions 
	and limitations under the License. -->
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
	xmlns:aop="http://www.springframework.org/schema/aop" xmlns:beans="http://www.springframework.org/schema/beans"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:jdbc="http://www.springframework.org/schema/jdbc" xmlns:jee="http://www.springframework.org/schema/jee"
	xmlns:jms="http://www.springframework.org/schema/jms" xmlns:lang="http://www.springframework.org/schema/lang"
	xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:oxm="http://www.springframework.org/schema/oxm"
	xmlns:task="http://www.springframework.org/schema/task" xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/aop
                           http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
                           http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                           http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/context/spring-context-3.0.xsd
                           http://www.springframework.org/schema/jdbc
                           http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
                           http://www.springframework.org/schema/jee
                           http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
                           http://www.springframework.org/schema/jms
                           http://www.springframework.org/schema/jms/spring-jms-3.0.xsd
                           http://www.springframework.org/schema/lang
                           http://www.springframework.org/schema/lang/spring-lang-3.0.xsd
                           http://www.springframework.org/schema/mvc
                           http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
                           http://www.springframework.org/schema/oxm
                           http://www.springframework.org/schema/oxm/spring-oxm-3.0.xsd
                           http://www.springframework.org/schema/task
                           http://www.springframework.org/schema/task/spring-task-3.0.xsd
                           http://www.springframework.org/schema/tx
                           http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
                           http://www.springframework.org/schema/util
                           http://www.springframework.org/schema/util/spring-util-3.0.xsd">

     <!-- Start Service Configurations -->
    <context:annotation-config/>

    <!-- Start KRAD Defaults beans> -->
    <!-- Default Spring Bean for replacing property values in beans-->
    <bean
            class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="properties" ref="configProperties" />
    </bean>

    <!--  Spring Bean Factory for loading configuration settings-->
    <bean
            class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
        <property name="staticMethod"
                  value="org.kuali.rice.core.impl.config.property.ConfigInitializer.initialize" />
        <property name="arguments">
            <list>
                <ref bean="bootstrapConfig" />
            </list>
        </property>
    </bean>

    <!-- Spring Bean Factory for loading property replacement beans -->
    <bean id="configProperties"
          class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
        <property name="targetObject" ref="bootstrapConfig" />
        <property name="targetMethod" value="getProperties" />
    </bean>

    <!-- Imports for further KRAD defaults-->
    <import resource="classpath:org/kuali/rice/core/RiceJTASpringBeans.xml" />
    <import resource="classpath:org/kuali/rice/core/RiceDataSourceSpringBeans.xml" />
    <!--<import resource="classpath:org/kuali/rice/config/RiceSpringBeans.xml"/>-->
    <import resource="classpath:KsapRiceSpringBeans.xml"/>
    <import resource="classpath:org/kuali/rice/core/CommonSpringBeans.xml"/>
    <!-- End KRAD Defaults -->

	<!-- KSAP-26: reasonable defaults for auto-wiring support -->
	<bean id="autowireCandidateResolver" scope="prototype"
		class="org.kuali.student.ap.framework.config.BaseAutowireCandidateResolver" />
	<bean id="delegatedBeanFactory"
		class="org.springframework.beans.factory.support.DefaultListableBeanFactory" />
	<bean id="additionalServices" class="org.kuali.rice.core.api.lifecycle.LifecycleBean" />
	<bean id="additionalComponents" class="org.kuali.rice.core.api.lifecycle.LifecycleBean" />
	<!-- KSAP-26: TODO - merge with Rice and remove these alternate configurers -->
	<!--<bean id="ksbConfigurer" class="org.kuali.student.ap.framework.config.KSBConfigurer" depends-on="coreConfigurer" />-->
	<!--<bean id="knsConfigurer" class="org.kuali.student.ap.framework.config.KRADConfigurer" depends-on="coreConfigurer" />-->
	<!-- /KSAP-26 -->

    <!-- Allows for the use of Annotations when setting up Data Object Beans -->
    <import resource="classpath:ks-transaction-context.xml" />

    <!-- Configurations for factory bean loading; List of Files with configuration settings-->
    <bean id="bootstrapConfig"
          class="org.kuali.rice.core.impl.config.property.ConfigFactoryBean">
        <property name="configLocations">
            <list>
                <!-- Standalone Configuration properties -->
                <value>classpath:META-INF/ks-ap-rice-standalone-config.xml</value>

                <!-- The Application Version -->
                <value>classpath:META-INF/build-details.xml</value>
            </list>
        </property>
    </bean>

    <!-- Import of deployment specific beans-->
    <import resource="classpath:StudentSpringBeans.xml"/>


</beans>
