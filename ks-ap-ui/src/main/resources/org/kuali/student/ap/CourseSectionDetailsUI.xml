<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

	<bean id="CourseDetails-FormView" parent="CourseDetails-FormView-parent" />
	<bean abstract="true" id="CourseDetails-FormView-parent" parent="KSAPBaseFormView">
		<property name="viewHelperServiceClass" value="org.kuali.student.ap.coursedetails.CourseDetailsViewHelperServiceImpl" />
        <property name="id" value="CourseDetails-FormView" />
		<property name="cssClasses">
			<list merge="true">
				<value>ksap-view</value>
			</list>
		</property>
        <property name="additionalCssFiles">
            <list>
                <value>themes/ksapboot/stylesheets/ksap.coursedetails.css</value>
            </list>
        </property>
		<property name="additionalScriptFiles">
			<list>
			</list>
		</property>
		<property name="items">
			<list>
				<bean parent="Ksap-Page" p:id="coursedetails-page">
                    <property name="cssClasses">
						<list merge="true">
						</list>
					</property>
					<property name="layoutManager">
						<bean parent="Uif-VerticalBoxLayout" />
					</property>
					<property name="items">
						<list>
                            <bean parent="Uif-HeaderThree" p:headerText="@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getFormattedMessage('details.course.section.title', new Object[]{courseCode})}" />
                            <ref bean="course-term-list"/>
						</list>
					</property>
                    <property name="stickyFooter" value="false"/>
				</bean>
			</list>
		</property>
		<property name="footer.render" value="false" />
        <property name="persistFormToSession" value="false"/>
		<property name="formClass" value="org.kuali.student.ap.coursesearch.form.CourseSectionDetailsForm" />
	</bean>
    <bean id="course-term-list" parent="course-term-list-parent">
        <property name="cssClasses">
          <list merge="true">
            <value>ksap-course-sections</value>
          </list>
        </property>
    </bean>
    <bean id="course-term-list-parent" abstract="true" parent="Uif-ListCollectionSection">
        <property name="collectionObjectClass"
                  value="org.kuali.student.ap.coursesearch.dataobject.CourseTermDetailsWrapper"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <property name="disclosure.render" value="true"/>
        <property name="propertyName" value="courseTermDetailsWrappers"/>
        <!-- Disclosure items REQUIRE a summary title to work correctly -->
        <property name="layoutManager.lineGroupPrototype.header.render" value="true"/>
        <property name="layoutManager.lineGroupPrototype.header.additionalCssClasses" value="@{#line.getTermAbbreviation()}"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.render" value="true"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.renderIcon" value="true"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.collapsedIconClass" value="ks-fontello-icon-right-open"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.expandedIconClass" value="ks-fontello-icon-down-open"/>
        <property name="layoutManager.summaryTitle" value="@{#line.termName} [css='ksap-text-small']@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getFormattedMessage('details.term.coSummary', new Object[]{#line.courseOfferingDetailsWrappers.size()})}[/css]"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.defaultOpen" value="false"/>
        <property name="subCollections">
            <list>
                <ref bean="course-offering-list" />
            </list>
        </property>
    </bean>
    <bean id="course-offering-list" parent="course-offering-list-parent"/>
    <bean id="course-offering-list-parent" abstract="true" parent="Uif-ListCollectionSection">
        <property name="collectionObjectClass"
                  value="org.kuali.student.ap.coursesearch.dataobject.CourseOfferingDetailsWrapper"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <property name="disclosure.render" value="true"/>
        <property name="propertyName" value="courseOfferingDetailsWrappers"/>
        <property name="layoutManager.lineGroupPrototype.header.render" value="true"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.render" value="true"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.renderIcon" value="true"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.collapsedIconClass" value="ks-fontello-icon-right-open"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.expandedIconClass" value="ks-fontello-icon-down-open"/>
        <property name="layoutManager.summaryTitle" value="@{#line.courseOfferingCode} - @{#line.courseOfferingTitle}"/>
        <property name="layoutManager.lineGroupPrototype.disclosure.defaultOpen" value="false"/>
        <property name="cssClasses">
            <list merge="true">
                <value>ksap-section-courses</value>
            </list>
        </property>
        <!-- property to activate disclosure -->
        <property name="items">
            <list>
                <bean parent="Uif-MessageField" p:messageText="[b]@{T(org.kuali.student.ap.framework.config.KsapFrameworkServiceLocator).getTextHelper().getText('details.course.description.label')}:[/b] @{#line.courseOfferingDescription}">
                    <property name="cssClasses">
                        <list merge="true">
                            <value>ksap-section-description</value>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="planned-reg-group-list" />
                <ref bean="format-offering-list" />
            </list>
        </property>
    </bean>
    <bean id="format-offering-list" parent="format-offering-list-parent"/>
    <bean id="format-offering-list-parent" abstract="true" parent="Uif-ListCollectionSection">
        <property name="collectionObjectClass"
                  value="org.kuali.student.ap.coursesearch.dataobject.FormatOfferingDetailsWrapper"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <property name="disclosure.render" value="true"/>
        <property name="propertyName" value="formatOfferingDetailsWrappers"/>
        <property name="layoutManager.lineGroupPrototype.header.render" value="true"/>
        <!-- property to activate disclosure -->
        <property name="items">
            <list>
                <bean parent="Uif-MessageField" p:messageText="@{#line.formatName} (@{#line.activityOfferingDetailsWrappers.size()})"/>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="activity_offering_list" />
            </list>
        </property>
    </bean>
    <bean id="activity_offering_list" parent="activity_offering_list_parent"/>
    <bean id="activity_offering_list_parent" abstract="true" parent="Uif-ListCollectionSection">
        <property name="collectionObjectClass"
                  value="org.kuali.student.ap.coursesearch.dataobject.ActivityOfferingDetailsWrapper"/>
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <property name="disclosure.render" value="true"/>
        <property name="propertyName" value="activityOfferingDetailsWrappers"/>
        <property name="layoutManager.lineGroupPrototype.header.render" value="true"/>
        <!-- property to activate disclosure -->
        <property name="items">
            <list>
                <bean parent="Uif-MessageField" p:messageText="Activity goes here!"/>
                <bean parent="Uif-MessageField" p:messageText="@{#line.activityOfferingId}"/>
                <bean parent="Uif-MessageField" p:messageText="@{#line.activityOfferingCode}"/>

            </list>
        </property>
        <!--<property name="subCollections">-->
        <!--<list>-->
        <!--<ref bean="conversation_list" />-->
        <!--</list>-->
        <!--</property>-->
    </bean>
    <bean id="planned-reg-group-list" parent="planned-reg-group-list-parent"/>
    <bean id="planned-reg-group-list-parent" abstract="true" parent="Uif-ListCollectionSection">
        <property name="collectionObjectClass"
                  value="org.kuali.student.ap.coursesearch.dataobject.PlannedRegGroupDetailsWrapper" />
        <property name="renderAddLine" value="false"/>
        <property name="renderLineActions" value="false"/>
        <property name="propertyName" value="plannedRegGroupDetailsWrappers" />
        <property name="layoutManager.lineGroupPrototype.header.render" value="false"/>
        <!-- property to activate disclosure -->
        <property name="items">
            <list>
                <bean parent="Uif-MessageField" p:messageText="Registration Group: @{#line.groupCode}"/>
            </list>
        </property>
        <property name="subCollections">
            <list>
                <ref bean="planned-reg-group-activities" />
            </list>
        </property>
    </bean>
    <bean id="planned-reg-group-activities" parent="Uif-TableCollectionSubSection"
          p:renderAddLine="false"  p:renderLineActions="false" p:renderHeader="false">
        <property name="collectionObjectClass"
                  value="org.kuali.student.ap.coursesearch.dataobject.ActivityOfferingDetailsWrapper" />
        <property name="propertyName" value="activityOfferingDetailsWrappers" />
        <property name="layoutManager.renderSequenceField" value="false" />
        <property name="layoutManager.applyDefaultCellWidths" value="false" />
        <property name="layoutManager.applyAlternatingRowStyles" value="false" />
        <property name="validationMessages" ref="KS-ValidationMessages-Off"/>
        <property name="layoutManager.richTable.templateOptions">
            <map merge="true">
                <!--<entry key="sDom" value="opir"/>-->
                <entry key="aaSorting" value="[[0, 'asc']]"/>
                <entry key="bPaginate" value="false"/>
                <entry key="bAutoWidth" value="false"/>
            </map>
        </property>
        <property name="items">
            <list>
                <bean parent="Uif-MessageField"
                      p:label="Type"
                      p:messageText="@{#line.activityFormatType">
                </bean>
                <bean parent="Uif-MessageField"
                      p:label="Code"
                      p:messageText="@{#line.activityOfferingCode}">
                </bean>
                <bean parent="Uif-MessageField"
                      p:label="Instructor" p:additionalCssClasses="nowrap"
                      p:messageText="@{#line.instructorName}">
                </bean>
                <bean parent="Uif-MessageField"
                      p:label="Days"
                      p:messageText="@{#line.days}">
                </bean>
                <bean parent="Uif-MessageField"
                      p:label="Time"  p:additionalCssClasses="nowrap"
                      p:messageText="@{#line.time}">
                </bean>
                <bean parent="Uif-MessageField"
                      p:label="Location"
                      p:messageText="@{#line.location}">
                </bean>
                <bean parent="Uif-MessageField"
                      p:label="Seats"
                      p:messageText="@{#line.currentEnrollment/maxEnrollment}">
                </bean>
                <bean parent="Uif-HorizontalFieldGroup" p:fieldLabel.labelText="Additional Details" >
                    <property name="items">
                        <list>
                            <bean parent="Uif-Message" p:render="@{(#line.honors==true)}"
                                  p:messageText="@{(#line.honors==true)? Honors : '' )}" />
                            <bean parent="Uif-Link" p:render="@{(#line.courseUrl != null)}"
                                  p:href="@{(#line.courseUrl != null)? | #line.courseUrl : '')  }"
                                  p:linkText="Course website"/>
                            <bean parent="Uif-Link" p:render="@{(#line.restrictionsUrl != null)}"
                                  p:href="@{(#line.restrictionsUrl != null)? | #line.restrictionsUrl : '')  }"
                                  p:linkText="Requirements"/>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
    </bean>
</beans>
